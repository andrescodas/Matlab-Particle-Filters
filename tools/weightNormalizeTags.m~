function [weightedTags,globalQuality] = weightNormalizeTags(polarModel,detections,inferingTags,robotByParticules,numberParticules,inertia,antennas)


for tagIndex = 1:length(inferingTags);

    globalQuality = 0;

    for antenna = 0:antennas-1

        ta = searchDetection(detections,inferingTags(tagIndex).tagId,antenna);

        if(detections(ta).detected)
            [inferingTags(tagIndex).particuleSet quality] = weightTagParticules(	polarModel, ...
                inferingTags(tagIndex).particuleSet, ...
                robotByParticules.estimatedPosition, ...
                antenna, ...
                1);

        else
            [inferingTags(tagIndex).particuleSet quality] = weightTagParticules(  polarModel, ...
                inferingTags(tagIndex).particuleSet, ...
                robotByParticules.estimatedPosition, ...
                antenna, ...
                0);
        end
        globalQuality = globalQuality+quality;
    end
    globalQuality = globalQuality/antennas;
    
end

if (nargout < 1)
    plotTagsEstimation(inferingTags,robotByParticules.estimatedPosition)
end